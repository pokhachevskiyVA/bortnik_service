## Описание функций из [psychotype.py](../nlp_texts/psychotype.py)

**df_with_features_and_ranges(public_df, public_semantic_role_df, morph_df)**

    Возвращает таблицу с текущими границами значений для каждого диапазона (по всем признакам).
    На вход требует: 
    
    public_df - datafame с заранее посчитанными фичами по всем текстам (за исключаением semantic_role фичей)
    public_semantic_role_df - datafame с заранее посчитанными semantic_role фичами по всем текстам
    morph_df - dataframe с заранее посчитанной морфологией по глаголам
    
    Характеристики, интервалы по которым выводятся, берутся из list_of_text_features. 
    Для добавления новых характеристик, их названия можно дописать в этот список. 
    Интервалы посчитаются автоматически. Изменить подсчёт можно в следующих 7 функциях.

**range_no(feature_name, public_df)**

    Возвращает границы интервала "Нет" по имени фичи. В данный момент, интервал (0, min).

**range_little(feature_name, public_df)**

    Возвращает границы интервала "Мало" по имени фичи. В данный момент, полуинтервал (min, q_20].

**range_less_mean(feature_name, public_df)**

    Возвращает границы интервала "Меньше минимума" по имени фичи. В данный момент, полуинтервал (q_20, q_40].

**range_less_mean(feature_name, public_df)**

    Возвращает границы интервала "Меньше минимума" по имени фичи. В данный момент, полуинтервал (q_20, q_40].

**range_mean(feature_name, public_df)**

    Возвращает границы интервала "Среднее" по имени фичи. В данный момент, полуинтервал (q_40, q_60].

**range_greater_mean(feature_name, public_df)**

    Возвращает границы интервала "Больше минимума" по имени фичи. В данный момент, полуинтервал (q_60, q_80].

**range_large(feature_name, public_df)**

    Возвращает границы интервала "Много" по имени фичи. В данный момент, полуинтервал (q_80, max].

**df_with_sample_ranges_and_psych(public_df, public_semantic_role_df, morph_df)**

    Возвращает таблицу с текущими границами значений диапазонов для каждого психотипа (по всем признакам).
    На вход требует: 
    
    public_df - datafame с заранее посчитанными фичами по всем текстам (за исключением semantic_role фичей)
    public_semantic_role_df - datafame с заранее посчитанными semantic_role фичами по всем текстам
    morph_df - dataframe с заранее посчитанной морфологией по глаголам
    
    Характеристики, интервалы по которым выводятся, берутся из list_of_text_features. 
    Для добавления новых характеристик, их названия можно дописать в этот список. 
    Но интервалы не посчитаются автоматически, необходимо будет отдельно дописать название фичи и
    её интервалы по психотипам в функции 
    range_with_size_by_psyh_and_feat_name(feature_name, psyh_name, public_df, public_semantic_role_df, morph_df). 
    Описание далее.

**range_with_size_by_psyh_and_feat_name(feature_name, psyh_name, public_df, public_semantic_role_df, morph_df)**

    Возвращает строку, содержащую пометку о размере интервала и сам интервал (пример: "Мало: (0, 1)"),
    принимая на вход название фичи, название психотипа и таблицы с посчитанными фичами по всем текстам.

**dict_with_psychotype_by_token_v1(userId, person_public_df, person_public_semantic_role_df, public_df, public_semantic_role_df)**

    Возвращает словарь с весами по каждому психотипу (согласно первой версии психотипирования), принимая на вход token
    человека, таблицы с посчитанными фичами по всем текстам всех людей и отдельные таблицы с посчитанными фичами по всем 
    текстам человека. Пока отсутствуют веса по психотипу "Депрессивный", так как колонка с ним содержит
    интервалы всего по трём характеристикам. Для его добавления необходимо будет дописать функцию,
    вычисляющую суммарный вес данного психотипа.

**dict_with_psychotype_by_token_v2(userId, person_public_df, person_public_semantic_role_df, public_df, public_semantic_role_df)**

    Возвращает словарь с весами по каждому психотипу (согласно второй версии психотипирования), принимая на вход token
    человека, таблицы с посчитанными фичами по всем текстам всех людей и отдельные таблицы с посчитанными фичами по всем 
    текстам человека. Пока отсутствуют веса по психотипу "Депрессивный", так как колонка с ним содержит
    интервалы всего по трём характеристикам. Для его добавления необходимо будет дописать функцию,
    вычисляющую суммарный вес данного психотипа.

**psychotype_by_token_v1(userId, person_public_df, person_public_semantic_role_df, public_df, public_semantic_role_df)**

    Возвращает психотип, имеющий наибольший вес (согласно первой версии психотипирования),
    принимая на вход token человека, таблицы с посчитанными фичами по всем текстам всех людей
    и таблицы с посчитанными фичами по текстам данного человека.

**psychotype_by_token_v2(userId, person_public_df, person_public_semantic_role_df, public_df, public_semantic_role_df)**

    Возвращает психотип, имеющий наибольший вес (согласно второй версии психотипирования),
    принимая на вход token человека, таблицы с посчитанными фичами по всем текстам всех людей
    и таблицы с посчитанными фичами по текстам данного человека.

**indicator_no(text, feature_name, person_public_df, public_df)**

    person_public_df - таблица с посчитанными фичами по текстам token'а
    Возвращает 1, если значение фичи "feature_name" в тексте "text" лежит в диапазоне "Нет" (то есть равно минимальному).
    Возвращает 0, в противном случае. Здесь можно изменить значение диапазона "Нет". 
    Это будет влиять на дальнейшие вычисления психотипов.
    Аналогично, чтобы изменить оставшиеся диапазоны, необходимы изменения в функциях: 
    indicator_little (мало), indicator_less_mean (меньше среднего), indicator_mean (среднее),
    indicator_greater_mean (больше среднего), indicator_large (много)

**sum_indicator_isteroid_v1(text, person_public_df, person_public_semantic_role_df, public_df, public_semantic_role_df)**

    Возвращает общее количество значений признаков по тексту, удовлетворяющих психотипу "Истероид" 
    (согласно первой версии психотипирования). При добавлении нового признака необходимо дописать 
    его внутрь данной функции по аналогии с остальными.

**sum_indicator_gipertim_v1(text, person_public_df, person_public_semantic_role_df, public_df, public_semantic_role_df)**

    Возвращает общее количество значений признаков по тексту, удовлетворяющих психотипу "Гипертим"
    (согласно первой версии психотипирования). При добавлении нового признака необходимо дописать
    его внутрь данной функции по аналогии с остальными.

**sum_indicator_shizoid_v1(text, person_public_df, person_public_semantic_role_df, public_df, public_semantic_role_df)**

    Возвращает общее количество значений признаков по тексту, удовлетворяющих психотипу "Шизоид"
    (согласно первой версии психотипирования). При добавлении нового признака необходимо дописать
    его внутрь данной функции по аналогии с остальными.

**sum_indicator_paranoyal_v1(text, person_public_df, person_public_semantic_role_df, public_df, public_semantic_role_df)**

    Возвращает общее количество значений признаков по тексту, удовлетворяющих психотипу "Параноял"
    (согласно первой версии психотипирования). При добавлении нового признака необходимо дописать
    его внутрь данной функции по аналогии с остальными.

**sum_indicator_epileptoid_v1(text, person_public_df, person_public_semantic_role_df, public_df, public_semantic_role_df)**

    Возвращает общее количество значений признаков по тексту, удовлетворяющих психотипу "Эпилептоид"
    (согласно первой версии психотипирования). При добавлении нового признака необходимо дописать
    его внутрь данной функции по аналогии с остальными.

**sum_indicator_emotiv_v1(text, person_public_df, person_public_semantic_role_df, public_df, public_semantic_role_df)**

    Возвращает общее количество значений признаков по тексту, удовлетворяющих психотипу "Эмотив"
    (согласно первой версии психотипирования). При добавлении нового признака необходимо дописать
    его внутрь данной функции по аналогии с остальными.

**sum_indicator_trevozhniy_v1(text, person_public_df, person_public_semantic_role_df, public_df, public_semantic_role_df)**

    Возвращает общее количество значений признаков по тексту, удовлетворяющих психотипу "Эпилептоид"
    (согласно первой версии психотипирования). При добавлении нового признака необходимо дописать
    его внутрь данной функции по аналогии с остальными.

**sum_indicator_isteroid_v2(text, person_public_df, person_public_semantic_role_df, public_df, public_semantic_role_df)**

    Возвращает общее количество значений признаков по тексту, удовлетворяющих психотипу "Истероид"
    (согласно второй версии психотипирования). При добавлении нового признака необходимо дописать
    его внутрь данной функции по аналогии с остальными.

**sum_indicator_gipertim_v2(text, person_public_df, person_public_semantic_role_df, public_df, public_semantic_role_df)**

    Возвращает общее количество значений признаков по тексту, удовлетворяющих психотипу "Гипертим"
    (согласно второй версии психотипирования). При добавлении нового признака необходимо дописать
    его внутрь данной функции по аналогии с остальными.

**sum_indicator_shizoid_v2(text, person_public_df, person_public_semantic_role_df, public_df, public_semantic_role_df)**

    Возвращает общее количество значений признаков по тексту, удовлетворяющих психотипу "Шизоид"
    (согласно второй версии психотипирования). При добавлении нового признака необходимо дописать
    его внутрь данной функции по аналогии с остальными.

**sum_indicator_paranoyal_v2(text, person_public_df, person_public_semantic_role_df, public_df, public_semantic_role_df)**

    Возвращает общее количество значений признаков по тексту, удовлетворяющих психотипу "Параноял"
    (согласно второй версии психотипирования). При добавлении нового признака необходимо дописать
    его внутрь данной функции по аналогии с остальными.

**sum_indicator_epileptoid_v2(text, person_public_df, person_public_semantic_role_df, public_df, public_semantic_role_df)**

    Возвращает общее количество значений признаков по тексту, удовлетворяющих психотипу "Эпилептоид"
    (согласно второй версии психотипирования). При добавлении нового признака необходимо дописать
    его внутрь данной функции по аналогии с остальными.

**sum_indicator_emotiv_v2(text, person_public_df, person_public_semantic_role_df, public_df, public_semantic_role_df)**

    Возвращает общее количество значений признаков по тексту, удовлетворяющих психотипу "Эмотив"
    (согласно второй версии психотипирования). При добавлении нового признака необходимо дописать
    его внутрь данной функции по аналогии с остальными.

**sum_indicator_trevozhniy_v2(text, person_public_df, person_public_semantic_role_df, public_df, public_semantic_role_df)**

    Возвращает общее количество значений признаков по тексту, удовлетворяющих психотипу "Эпилептоид"
    (согласно второй версии психотипирования). При добавлении нового признака необходимо дописать
    его внутрь данной функции по аналогии с остальными.

**dist_psych_by_tokens_norm_v1(tokens_list, public_df, public_semantic_role_df)**

    Возвращает нормированную таблицу с распределением людей по психотипам (согласно первой версии психотипирования),
    принимая на вход список с token'ами людей и DataFram'ы с посчитанными фичами по всем текстам.

**dist_psych_by_tokens_v1(tokens_list, public_df, public_semantic_role_df)**

    Возвращает ненормированную таблицу с распределением людей по психотипам (согласно второй версии психотипирования),
    принимая на вход список с token'ами людей и DataFram'ы с посчитанными фичами по всем текстам.

**dist_psych_by_tokens_norm_v2(tokens_list, public_df, public_semantic_role_df)**

    Возвращает нормированную таблицу с распределением людей по психотипам (согласно первой версии психотипирования), 
    принимая на вход список с token'ами людей и DataFram'ы с посчитанными фичами по всем текстам.

**dist_psych_by_tokens_v2(tokens_list, public_df, public_semantic_role_df)**

    Возвращает ненормированную таблицу с распределением людей по психотипам (согласно второй версии психотипирования),
    принимая на вход список с token'ами людей и DataFram'ы с посчитанными фичами по всем текстам.

**tables_per_text_by_token_conceptual(token, person_public_dict_with_distances, public_dict_with_distances, type_of_dist)**

    Выводит таблицы с анализом понятийных конструкций по всем тексам человека с токеном token, а также выводит тексты, 
    в которых раскрашены слова, относящиеся к психотипам. 
    На вход принимает: public_dict_with_distances - словарь с рассчитанными расстояниями до психотипов по всем текстам
    из базы, person_public_dict_with_distances - словарь с расстояниями до психотип по текстам конкретного человека, 
    type_of_dist - тип агрегации расстояний до конкретных слов для рассчета расстояния от текста до психотипов.